<?php

namespace App\Services\Aparat;

use Illuminate\Support\Facades\Http;

class AparatHandler
{
    private function getToken()
    {
        $url = $this->replaceRequirement(config('aparat.login'), [
            '{user}' => config('aparat.username'),
            '{lpass}' => sha1(md5(config('aparat.password'))),
        ]);
        $response = Http::get($url);
        return $response->json('profile.ltoken');
    }

    private function replaceRequirement($url, $options)
    {
        foreach ($options as $key => $value) {
            $url = str_replace($key, $value, $url);
        }
        return $url;
    }
}

